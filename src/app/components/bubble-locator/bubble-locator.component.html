<div class="outter w-100 p-sm" fxLayout="column" fxLayoutAlign="center center">
  <div (click)="onMouseClick($event)" fxLayout="column" id="video-parent" class="p-0" [ngStyle]="{ 'width.px': videoWidth, 'height.px': videoHeight }">
    <mat-icon class="locator fade-in-fast" *ngFor="let bubble of currentFrameBubbles" [ngStyle]="{ 'left.px': getX(bubble), 'top.px': getY(bubble), 'color': selectedColor }">clear</mat-icon>
    <div class="color-picker" fxLayout="column" fxLayoutAlign="start center" [ngStyle]="{ 'left.px': widthOffset - 250 }">
      <h1 class="mt-xs mb-xs">Selector Color</h1>
      <button mat-fab class="m-xs" (click)="this.selectedColor=color" *ngFor="let color of colors" [ngStyle]="{ 'background-color': color }"></button>
    </div>
    <div class="frame-buttons" fxLayout="column" fxLayoutAlign="start center" [ngStyle]="{ 'left.px': widthOffset + videoWidth + 16 }">
      <h1 class="mt-xs mb-xs">Key Frames</h1>
      <div class="button-box w-100" *ngFor="let frame of frameLocations" fxLayout="row" fxLayoutAlign="start start">
        <div class="number-container">
          <p class="frame-slot-text mb-0">{{ frame.frameSlot + 1 }}.</p>
        </div>
        <div fxFill>
          <button class="frame-button" mat-raised-button (click)="setFrame(frame.time)" *ngIf="frame.time !== -1" [ngStyle]="{ 'background-color': '#57b8ff' }">Frame: {{ getFrame(frame.time) }}</button>
          <button mat-icon-button (click)="deleteSelectedFrame(frame.time)" *ngIf="frame.time !== -1">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
    <mat-video class="video" [keyboard]="false" [preload]="true" [fullscreen]="false" [overlay]="!locatingBubbles" [class.disable-clicks]="locatingBubbles"  #video [showFrameByFrame]="true" src="{{ videoUrl }}"></mat-video>
    <div *ngIf="!locatingBubbles" fxFlex="row" fxLayoutAlign="start start">
      <div class="playbackBox mr-md">
        <mat-slider class="fade-in-fast" min="10" max="100" step="5" value="{{ playbackSpeed }}" (input)="setPlaybackSpeed($event)"></mat-slider>
        <p class="m-0 ml-xs fade-in-fast">Playback speed: {{ playbackSpeed }}%</p>
      </div>
      <div fxLayout="column" fxLayoutAlign="center center">
        <button class="bottom-buttons fade-in-fast" mat-button (click)="locateBubbles()">Locate Bubbles</button>
        <button class="bottom-buttons fade-in-fast" mat-button (click)="badQuality()">Poor Quality</button>
        <button class="bottom-buttons fade-in-fast" mat-button (click)="submit()" *ngIf="bubbles.length >= 8">Submit Assessment</button>
      </div>
    </div>
  </div>
  <div class="mt-sm">
    <label class="bold" *ngIf="locatingBubbles">Frame Options:</label>
    <div class="mt-xs" fxLayout="row" fxLayoutAlign="center center" *ngIf="locatingBubbles">
      <mat-radio-group aria-label="Select an option" [(ngModel)]="frameOptions" *ngFor="let option of options">
        <mat-radio-button class="mr-xs" (click)="edited = true" value="{{ option }}">{{ option }}</mat-radio-button>
      </mat-radio-group>
    </div>
  </div>
  <div fxLayout="column" fxLayoutAlign="center center">
    <button class="bottom-buttons fade-in-fast" mat-button (click)="frameCompleted()" *ngIf="locatingBubbles">Done Locating Bubles</button>
    <button class="bottom-buttons fade-in-fast" mat-button (click)="deleteBubbles()" *ngIf="locatingBubbles && !deletingBubbles">Delete Bubble</button>
    <button class="bottom-buttons fade-in-fast" mat-button (click)="doneDeletingBubbles()" *ngIf="deletingBubbles">Done Deleting Bubble</button>
  </div>
</div>
